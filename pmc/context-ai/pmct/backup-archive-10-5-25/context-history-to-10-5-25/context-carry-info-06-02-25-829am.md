# Development Context & Operational Priorities
**Date:** 2025-06-02 08:29 PST
**Project:** Aplio Design System Modernization (aplio-mod-1) & Project Memory Core (PMC)
**Context Version:** 3.0.0

## Introduction

This context document addresses two integrated projects that operate in tandem:

1. **Aplio Design System Modernization (aplio-mod-1)**: A comprehensive modernization project converting the legacy Aplio Design System to leverage Next.js 14's App Router architecture and TypeScript. The project focuses on the Home-4 template implementation while preserving visual fidelity and enhancing developer experience.

2. **Project Memory Core (PMC)**: A structured task management and context retention system that manages the development of the Aplio project. PMC provides methodical task tracking, context preservation, and implementation guidance through its command-line interface and document-based workflow.

These projects are deliberately interconnected - PMC requires a real-world development project to refine its capabilities, while Aplio benefits from PMC's structured approach to development. Depending on current priorities, work may focus on either advancing the Aplio Design System implementation or enhancing the PMC tooling itself.

## Current Focus

### Active Development Focus
We need to write a new specification. The first step is to write the specification of how to implement these changes and put it here: pmc\context-ai\chat-contexts-log\pmct\update-test-system-testing-version-2-spec.md

This is the current testing instruction prompt for a single task:
pmc\core\active-task-unit-tests.md
it is given to the ai testing agent to instruct it how to execute the tests for this Next.js 14 project.
You MUST read it all.

Now we are implementing a new instruction prompt for a single task. An example is found here: pmc\core\active-task-unit-tests-2-original-manual.md
You MUST read it all.

The testing instruction prompt is derived from this file:
pmc\product\07b-task-aplio-mod-1-testing-built.md (this file is too large for you to read all of it. Do not attempt it. You can read 500 lines to understand it's context)

pmc\core\active-task-unit-tests.md is generated by the start-task command in: pmc\system\management\context-manager-v2.js
Read this command completely.

start-task uses this template: pmc\system\templates\active-task-test-template.md to help create the testing instruction file(active-task-unit-tests.md).

What we need to do now is migrate from this testing instruction format and instructions: pmc\core\active-task-unit-tests.md
to the new result: pmc\core\active-task-unit-tests-2-original-manual.md

Critical to this new format is implementing our new testing system which is contained in: aplio-modern-1\test with the commands and scripts here: aplio-modern-1\test\utils
You can see how their purpose, use and operation in pmc\core\active-task-unit-tests-2-original-manual.md

To implement the new testing format we must:

1. Generate a new compatible template here: pmc\system\templates\active-task-test-template-2.md

2. Include this new instruction in the template file and output file:
`## Discovery Requirements:
- Find ALL testable elements mentioned in the 1 Components/Elements
- Classify each element by its most appropriate testing approach and log that approach in this file: pmc\system\plans\task-approach\current-test-approach.md
- Prioritize elements based on user impact and complexity
- Consider legacy references: [map legacy references from pmc\product\07b-task-aplio-mod-1-testing-built.md]`

Put this additional instruction in the appropriate place in the new testing format.

3. update the start-task command to populate the new template and put the finished testing file here: pmc\core\active-task-unit-tests-2.md

Remember the first step is to write the specification of HOW to implement these changes and put the spec here: pmc\context-ai\chat-contexts-log\pmct\update-test-system-testing-version-2-spec.md

Pseudocode or snippets in specifications are problematic when they often have no context and no direct instruction on their use. If you are going to include the pseudocode examples in this spec, make sure you tell the coding agent EXACTLY why, when, and how to use each instance of the code examples.

Please ask me any questions needed to write this specification completely and correctly.

Do not deviate from this focus without explicit instruction.
All other information in this document is reference material only.

FAQs:

1. Discovery Requirements Placement: Where exactly in the new template structure should the Discovery Requirements section be placed for optimal workflow?
Answer: Near the beginning in Phase 2: Component Discovery. Use analysis to put it in the correct pace. The point of the testing instruction is to have a cognitive flow with direct instructions. So make sure the next version adheres to that.

2. Error Handling Scope: Should the specification include error handling for all phases or focus on specific critical failure points?
I am not sure what you mean by error handling. 
For testing failures as per the updated specification you must use the cycle pattern:
## Fix/Test/Analyze Cycle Pattern

3. Template Variable System: Should the new template maintain the same variable replacement system (e.g., {{TASK_ID}}) as the current template?
Sure yes, if it is able to. Implement new ones as needed.

4. Testing Infrastructure Dependencies: Are there specific version requirements or installation procedures for the new testing utilities that should be documented?
No, I think you can see in the new version Phase 1 the instructions make sure all the setup is available as required. 

5. There is one major caveat about the content in: pmc\core\active-task-unit-tests-2-original-manual.md. It includes references to specific components that were not named in the original T-1.1.3 task unit testing documentation in pmc\product\07b-task-aplio-mod-1-testing-built.md

The reason the pmc\core\active-task-unit-tests-2-original-manual.md has specific references to components like "Card", "FaqSection", "DashboardStats", etc is a result of running the "## Discovery Requirements:" prompt described in pmc\system\plans\context-carries\context-carry-info-06-02-25-829am.md

The script won't have or know those specific components, because it is a mechanical script.  That is why it is important to have the: 
``## Discovery Requirements" section in the new instructions.  And since we can't name them in the mechanical script any section in pmc\core\active-task-unit-tests-2-original-manual.md that refers to specific components like "Card", "FaqSection", "DashboardStats", etc should instead say something like "Apply this action (Create Unit Test Files, Create Scaffolds, etc...) to all discovered components in your knowledge and in the "pmc\system\plans\task-approach\current-test-approach.md" file.
Key reminders about this:
1. You are the senior ai test engineer. Use your expertise to ascertain the best way to implent these changes.
2. Read at least 7 non sequential Tasks T-X.Y.Z in pmc\product\07b-task-aplio-mod-1-testing-built.md and task build file: pmc\core\active-task.md to understand the full context and how each task is different. (I forgot to include pmc\product\06b-aplio-mod-1-tasks-built.md in the original spec just now. make sure to read the corresponding tasks in that file too)
3. I will reiterate: Do not try to implement a new testing document that has information that does not exist in pmc\product\07b-task-aplio-mod-1-testing-built.md or pmc\product\06b-aplio-mod-1-tasks-built.md. Make it modular so the new testing approach can apply to the widest variance of Task test requirements.





## Project Reference Guide
REFERENCE MATERIALS
Everything below this line is supporting information only. Do NOT select the current task focus from this section.

### Aplio Design System Modernization Project

#### Project Overview
This project aims to transform the existing JavaScript-based Aplio theme into a modern TypeScript-powered Next.js 14 platform. The project specifically focuses on migrating the Home 4 template (https://js-aplio-6.vercel.app/home-4) as the flagship demonstration while preserving Aplio's premium design aesthetics from the existing design system in `/aplio-legacy/`.

#### Key Documents
1. Seed Story: `pmc/product/00-aplio-mod-1-seed-story.md`
2. Project Overview: `pmc/product/00-aplio-mod-1-seed-narrative.md`
3. Raw Data: `pmc/product/_seeds/00-narrative-raw_data-ts-14-v3.md`

#### Project Objectives

##### Primary Goals
1. Migrate Home 4 template to Next.js 14 App Router architecture
2. Preserve exact design elements from `/aplio-legacy/`
3. Implement TypeScript with full type safety
4. Maintain premium design quality and animations

##### Technical Requirements
1. Next.js 14 App Router implementation
2. Complete TypeScript migration
3. Modern component architecture
4. Performance optimization

##### Design Requirements
1. Exact preservation of design elements from `/aplio-legacy/`
2. Maintenance of animation quality
3. Responsive behavior preservation
4. Professional template implementation

### Project Memory Core (PMC) System

#### Core Functionality
Everything in this section is supporting information only. Do NOT select the current task focus from this section.
PMC is a structured modern software development task management and context retention system built around the the main active task file as its central operational component. PMC is product agnostic. In this instance we are using it to code the Aplio Design System Modernization (aplio-mod-1) system described above. The system provides:

1. **Context Locality**: Instructions and context are kept directly alongside their relevant tasks
2. **Structured Checkpoints**: Regular token-based checks prevent context drift
3. **Directive Approach**: Clear commands and instructions with explicit timing requirements
4. **Task-Centric Documentation**: Single source of truth for task implementation

#### Commands

The driver for most PMC commands are in:
`pmc/bin/aplio-agent-cli.js`

The code for most PMC commands are contained within:
- The original context manager script: `pmc/system/management/context-manager.js`
- The next context manager script: `pmc/system/management/context-manager-v2.js` (created when the original got too large)

Here are some important PMC commands:

##### Start Task
```bash
node pmc/bin/aplio-agent-cli.js start-task "T-EXAMPLE.1.1"
```

##### Add Structured Task Approaches
```bash
node pmc/bin/aplio-agent-cli.js task-approach
```

##### Update Element Status
```bash
node pmc/bin/aplio-agent-cli.js update-element-status "T-EXAMPLE.1.2:ELE-1" "Complete"
```

##### Task Completion
```bash
node pmc/bin/aplio-agent-cli.js complete-task "T-EXAMPLE.1.3"
```

##### Context Carryover for New Chat Windows
```bash
node system/management/carryover-command.js
```

#### Project Structure
```
aplio-legacy/ (legacy system)
aplio-modern-1/ (new system)
pmc/ (PMC system)
├── bin/
├── core/
├── system/
│   ├── management/
│   └── templates/
└── product/
```

### Additional Resources

#### Key URLs

#### Important Directories